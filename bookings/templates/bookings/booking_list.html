{% extends "base.html" %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}

<!--Main section-->
<main>

  <!--Intro section-->
  <section>
    <h2>Bookings</h2>
  </section>

  <section class="text-start">
    <p>Welcome to our bookings page where you can book practice sessions during the curling season from October to
      March.</p>
    <p>Practice nights are Tuesday and Thursday, with six sessions available each evening:</p>
    <p class="sheets">3 sheets from 18:00 to 19:30</p>
    <p class="sheets">3 sheets from 20:00 to 21:30</p>
    <p>Enter your booking requirements in the form below.</p>
    <p>For new members, please note that a playing area is called a sheet, see: <a href="{% url 'faqs' %}">FAQs.</a></p>

  </section>

  <!--Make booking with crispy forms-->
  <section>
    <div class="card mb-3 mt-3">
      <div>
        <!-- <h3> Make booking:</h3> -->
        <form method="post" style="margin-top: 1.3em;" enctype="multipart/form-data">
          {{ booking_form | crispy }}
          {% csrf_token %}
          <button type="submit" class="btn btn-lg">Submit</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Link to My Bookings page -->
  <section>
    <p>View, change or cancel bookings here:</p>
    <div>
      <a href="{% url 'my_bookings' %}" class="btn btn-lg btn-success" type="submit">My Bookings</a>
    </div>
  </section>

  <!--Current user's bookings section-->
  <!-- Heading -->
  <section>
    <p>The My Bookings button links to the my_bookings.html and the data below is displayed there. I've not been able to
      remove it from this page. It shows the bookings made by the current user but the Edit and Cancel buttons are not
      an active part of the form. How do I 'link' these since the form draws upon the model and buttons are not a data
      field?
    </p>
  </section>
  <section>
    <h2>My Bookings</h2>
  </section>

  <!-- List of bookings -->
  <section class="card">
    <form>
      {% for booking in user_booking %}
      <div class="text-start">
        <div class="row row-cols-3">
          <div class="col-3"></div>
          <div class="col-3">Date:</div>
          <div class="col-6">{{booking.date}}</div>
        </div>
      </div>

      <div class="text-start">
        <div class="row row-cols-3">
          <div class="col-3"></div>
          <div class="col-3">Sheet / Time:</div>
          <div class="col-6">{{booking.sheet_time}}</div>
        </div>
      </div>

      <div class="text-start">
        <div class="row row-cols-3">
          <div class="col-3"></div>
          <div class="col-3">Wheelchair Sheet:</div>
          <div class="col-6">{{booking.wheelchair_sheet}}</div>
        </div>
      </div>

      <!-- Edit or Cancel bookings section -->
      <section>
        <div class="text-start">
          <div class="row row-cols-3">
            <div class="col-3"></div>
            <div class="col-3">
              <button type="button" class="btn btn-success" type="submit">Edit</button>
            </div>
            <div class="col-6">
              <button type="button" class="btn btn-danger" type="submit">Cancel</button>
            </div>
          </div>
        </div>

      </section>

      <div class="text-center break-div">
        <div class="row">
          <div class="col">* * * * *</div>
        </div>
      </div>

      {% endfor %}
    </form>
  </section>

</main>
{% endblock content %}